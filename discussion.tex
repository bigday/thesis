\chapter{Discussion}
% TODO: reflect on the work done; analyze the choices made etc. as objectively
% as possible

In this chapter, we discuss the work completed towards reconstructing a 3D mesh of the human body and outline suggestions for making a comprehensive implementation. We also analyze the choices made and the operability of different parts of the system. Finally, we conclude by reviewing the major achievements of this thesis, while examining problems in planning and conducting the research.

\fixme{TODO: graphics showing 1) kinect depth 2) point cloud 3) segmenting 4) measurement 5) calculation 6) makehuman} \label{fig:phases}

\newtopic

The scope of our work was human body reconstruction, and we chose a Microsoft Kinect for Xbox 360 as the hardware sensor to be used. We tried using three different driver libraries for the hardware, and decided OpenNI and NITE to be the most suitable. This choice was based on impressions gained through brief testing---a further assessment would be required to objectively decide whether OpenNI is truly better than Microsoft Kinect SDK for the task. We outline the known differences in section~\ref{literature.drivers}. However, we concede that the accuracy of skeleton tracking is important, and our knowledge of it is inexact. Ideally, we would have utilized an open source skeleton tracking system that has been thoroughly tested---if one existed.

The choice of sensor dictated that work would go on using 3D point data. Image-based reconstruction deserves to be researched, too, but requires a better RGB sensor than the one Kinect has. In principle, using depth information should make reconstruction very easy, but in practice the inaccuracy and noise cause difficulties. This became apparent as work progressed.

Our raw data, then, comprised point clouds gathered using OpenNI, with users segmented from the background and their skeletons tracked by NITE.

We decided that reconstruction should become easier if we further segment the point cloud into sub-clouds containing points of a single body part. The exact manner this was done was a nearest-neighbor search; each point is assigned to the nearest bone. This makes our approach heavily dependent on the skeleton data and vulnerable to errors therein. Moreover, the amount of bones in the NITE skeleton is small, yielding few body parts. On the other hand, better segmentation would require more a priori knowledge---perhaps a skeleton with more bones or a machine learning algorithm with a database of segmented bodies. Consequently, we could not realistically get significantly better body part segmentation given the resources available.

Another consideration is whether a method that doesn't rely on body part segmentation would be feasible. This is actually the case with the method \citet{weiss2011home} employ, with notable success. Using an existing template mesh, posing it similarly to the user and optimizing according to the point cloud is an approach worthy of consideration. Nonetheless, we chose not to extend our work in this direction, as the computational difficulty of such approaches has been great. We chose to strive for a system simple enough to work in real time instead.

\fixme{ \\
    TODO: review the best/chosen approach step by step \\
    - kinect data via openni \\
    - user segmentation by NITE \\
    - body part segmentation (nearest neighbor bone) \\
    - automatic measurements on bones and body parts \\
    - ??? \\
    - makehuman measurement plugin \\
    - (blender for animation) \\
}

\section{Future work}

\fixme{TODO: write this properly \\
- find best measurements and their equivalence to parameters \\
- implement real-time fitting of targets \\
- optimize body part segmentation \\
- limbwise kinfu with something else than ICP \\
- texturing \\
- animation (makehuman? blender? something else?) \\
- research Klaus's point cloud accumulation \\
}

\section{Conclusion}

The major accomplishments of this thesis are threefold in regard to human body reconstruction using depth camera data.

Firstly, we conducted a review of the subject matter, including existing systems and related research. In chapter~\ref{literature}, we described the most relevant areas of research in terms of what should be considered when designing a system for 3D reconstruction of the human body. We also encountered and identified the major problems that must be solved in order to create a working system.

Secondly, we suggested different valid approaches in chapter~\ref{approach}. We described each approach in terms of how the problem can be divided into sub-tasks and determined requirements for their implentations. We also analyzed possible problems with each approach and recommended the one we deemed most promising.

Thirdly, we made prototype implementations for many of the tasks described, as described in chapter~\ref{approach}. These implementations helped us further understand the tasks and problems that must be solved. They also provide a useful basis for further work on a complete human body reconstruction system.

\newtopic

Ultimately, this research did not meet its original goal---a complete human body reconstruction system that works in real time. Various causes contributed to this result. Fundamentally, the difficulty of achieving the chosen research goal was seriously underestimated. Our lack of previous knowledge of the subject matter was the primary reason for this. Unfortunately, there was little existing expertise in relevant research topics in the Department of Media Technology, and instruction during the research was lacking. Therefore, it took us long to realize our mistake.

Still, we have made a promising start in the research---the error was mostly in choosing the scope to fit the limited resources of a Master's thesis. Scoping the research appropriately was made difficult by the broadness of the subject. Any given task requires a broad understanding of different research areas, which had to be gained first. We also made the error of focusing on finding a lot of different ideas---while neglecting validation of their feasibility before committing to working on them.

All things considered, we made good groundwork by investigating, planning and partially implementing a system for human body reconstruction, while the research goal was not completely met.
